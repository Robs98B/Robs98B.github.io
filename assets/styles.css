/* assets/styles.css */

/* --- TOKENS & VARIABILI (Material 3 System) --- */
:root {
  /* Core Colors - Light */
  --md-sys-color-primary: #005ac1;
  --md-sys-color-on-primary: #ffffff;
  --md-sys-color-primary-container: #d8e2ff;
  --md-sys-color-on-primary-container: #001a41;
  
  --md-sys-color-secondary: #575e71;
  --md-sys-color-secondary-container: #dbe2f9;
  --md-sys-color-tertiary: #715573;
  --md-sys-color-tertiary-container: #fbd7fc;

  --md-sys-color-surface: #fdfbff;
  --md-sys-color-surface-dim: #ded8e1; /* Sfondo pagina */
  --md-sys-color-surface-container: #f3edf7; /* Card */
  --md-sys-color-surface-container-high: #ece6f0; /* Card Hover */
  
  --md-sys-color-outline: #74777f;
  --md-sys-color-outline-variant: #c4c6cf;

  --md-sys-color-on-surface: #1a1b1f;
  --md-sys-color-on-surface-variant: #44474f;

  /* Shapes & Motion */
  --md-sys-shape-corner-large: 24px;
  --md-sys-shape-corner-extra-large: 28px;
  --md-sys-shape-corner-full: 9999px;
  
  --md-sys-motion-duration-medium: 400ms;
  --md-sys-motion-easing-emphasized: cubic-bezier(0.2, 0.0, 0, 1.0);
}

[data-theme="dark"] {
  /* Core Colors - Dark */
  --md-sys-color-primary: #adc6ff;
  --md-sys-color-on-primary: #002e69;
  --md-sys-color-primary-container: #004494;
  --md-sys-color-on-primary-container: #d8e2ff;

  --md-sys-color-secondary: #bfc6dc;
  --md-sys-color-secondary-container: #3f4759;
  --md-sys-color-tertiary: #dfbbde;
  --md-sys-color-tertiary-container: #583e5a;

  --md-sys-color-surface: #141316; /* Sfondo profondo */
  --md-sys-color-surface-dim: #111114;
  --md-sys-color-surface-container: #1e1f23; /* Card Base */
  --md-sys-color-surface-container-high: #282a2f; /* Card Hover */

  --md-sys-color-outline: #8e9099;
  --md-sys-color-outline-variant: #44474f;

  --md-sys-color-on-surface: #e3e2e6;
  --md-sys-color-on-surface-variant: #c4c6cf;
}

/* --- RESET & BASE --- */
* { box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
  margin: 0;
  font-family: 'Inter', system-ui, sans-serif;
  background-color: var(--md-sys-color-surface-dim);
  color: var(--md-sys-color-on-surface);
  transition: background-color 0.4s ease, color 0.4s ease;
  overflow-x: hidden; /* Previene scroll orizzontale nelle animazioni */
}

a { text-decoration: none; color: inherit; }
img { max-width: 100%; display: block; border-radius: var(--md-sys-shape-corner-large); }

/* --- LAYOUT --- */
.container {
  width: min(1200px, 92%);
  margin: 0 auto;
  padding: 2rem 0 6rem;
}

/* --- TOP APP BAR (Header) --- */
.site-header {
  position: sticky; top: 0; z-index: 100;
  height: 72px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 max(4%, 24px);
  background: var(--md-sys-color-surface-dim); /* Tinta unita per coerenza M3 */
  transition: box-shadow 0.3s;
}
.site-header.scrolled {
  box-shadow: 0 2px 12px rgba(0,0,0,0.06); /* Elevazione allo scroll */
}

.brand {
  display: flex; align-items: center; gap: 12px;
  font-weight: 700; font-size: 1.25rem;
  letter-spacing: -0.5px;
  color: var(--md-sys-color-on-surface);
}

/* Nav Desktop */
.site-nav { display: flex; align-items: center; }
.nav-list { display: flex; gap: 8px; margin: 0; padding: 0; list-style: none; }

.nav-link {
  padding: 0 16px; height: 40px;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--md-sys-shape-corner-full);
  font-size: 0.9rem; font-weight: 600;
  color: var(--md-sys-color-on-surface-variant);
  transition: all 0.2s ease;
  position: relative; overflow: hidden;
}
.nav-link:hover {
  background: var(--md-sys-color-on-surface);
  color: var(--md-sys-color-surface);
  opacity: 0.08; /* State layer simulato */
}
.nav-link:hover { opacity: 1; background: rgba(125,125,125, 0.1); } /* Fix hover reale */

.nav-link[aria-current="page"] {
  background: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-surface);
}

/* Theme Toggle */
.icon-btn {
  width: 48px; height: 48px;
  border: none; background: transparent;
  color: var(--md-sys-color-on-surface-variant);
  border-radius: 50%;
  cursor: pointer;
  display: grid; place-items: center;
  font-size: 1.2rem;
  transition: background 0.2s;
}
.icon-btn:hover { background: rgba(125,125,125, 0.15); }

/* --- HERO SECTION --- */
.hero {
  padding: 4rem 0;
  max-width: 900px;
  animation: slideInUp 0.8s var(--md-sys-motion-easing-emphasized);
}
.hero-label {
  display: inline-block;
  font-size: 0.9rem; font-weight: 600; letter-spacing: 0.5px;
  color: var(--md-sys-color-primary);
  margin-bottom: 1rem; text-transform: uppercase;
}
.hero h1 {
  font-size: clamp(2.5rem, 6vw, 4rem);
  line-height: 1.1; margin: 0 0 1.5rem;
  font-weight: 800; letter-spacing: -1px;
}
.hero p {
  font-size: 1.3rem; line-height: 1.6;
  color: var(--md-sys-color-on-surface-variant);
  max-width: 65ch; margin-bottom: 2.5rem;
}

/* Buttons (Filled & Outlined) */
.btn {
  height: 48px; padding: 0 24px;
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  border-radius: var(--md-sys-shape-corner-full);
  font-weight: 600; font-size: 1rem;
  cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
}
.btn.primary {
  background: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border: none;
}
.btn.primary:hover {
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}
.btn.secondary {
  background: transparent;
  border: 1px solid var(--md-sys-color-outline);
  color: var(--md-sys-color-primary);
}
.btn.secondary:hover {
  background: var(--md-sys-color-primary-container);
  border-color: transparent;
}

/* --- CARDS (M3 Elevated) --- */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: 24px;
  padding-top: 2rem;
}

.card {
  background: var(--md-sys-color-surface-container);
  border-radius: var(--md-sys-shape-corner-large);
  padding: 24px;
  transition: all 0.3s var(--md-sys-motion-easing-emphasized);
  display: flex; flex-direction: column;
  position: relative;
  border: 1px solid transparent;
  opacity: 0; /* Init animation */
  animation: staggerFadeIn 0.6s forwards;
}

.card:hover {
  background: var(--md-sys-color-surface-container-high);
  transform: translateY(-6px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.05);
}

.card-badge {
  align-self: flex-start;
  padding: 6px 12px;
  border-radius: 8px;
  background: var(--md-sys-color-tertiary-container);
  color: var(--md-sys-color-tertiary); /* Contrast fix? usually on-tertiary-container */
  color: #2c1a2d; /* Manual contrast fix for light mode text inside tertiary */
  font-size: 0.8rem; font-weight: 700; margin-bottom: 1rem;
}
[data-theme="dark"] .card-badge { color: #fbd7fc; } /* Text light on dark */

.card h3 {
  font-size: 1.5rem; margin: 0 0 0.75rem;
  color: var(--md-sys-color-on-surface);
}
.card p {
  color: var(--md-sys-color-on-surface-variant);
  line-height: 1.6; margin: 0; flex-grow: 1;
}

/* --- FILTERS (Chips) --- */
.filters-container {
  margin-bottom: 3rem;
  padding: 1.5rem;
  background: var(--md-sys-color-surface-container);
  border-radius: var(--md-sys-shape-corner-large);
  display: flex; flex-wrap: wrap; gap: 2rem; align-items: start;
}

.filter-group h4 {
  margin: 0 0 12px; font-size: 0.9rem; text-transform: uppercase;
  color: var(--md-sys-color-on-surface-variant); letter-spacing: 1px;
}
.chip-row {
  display: flex; flex-wrap: wrap; gap: 10px;
}

/* The actual clickable chip */
.filter-chip {
  position: relative;
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 16px;
  border-radius: 8px; /* M3 small shape */
  background: var(--md-sys-color-surface);
  border: 1px solid var(--md-sys-color-outline-variant);
  cursor: pointer;
  user-select: none;
  transition: all 0.2s ease;
  font-weight: 500; font-size: 0.95rem;
  color: var(--md-sys-color-on-surface-variant);
}

.filter-chip input { display: none; }
.filter-chip:hover { background: var(--md-sys-color-surface-container-high); }

/* Selected State */
.filter-chip:has(input:checked) {
  background: var(--md-sys-color-secondary-container);
  border-color: transparent;
  color: var(--md-sys-color-on-primary-container);
}
.filter-chip .check-icon {
  width: 0; overflow: hidden; transition: width 0.2s ease;
}
.filter-chip:has(input:checked) .check-icon { width: 18px; }

/* Custom Select as Chip */
.select-wrapper {
  position: relative; display: inline-block;
}
.select-wrapper select {
  appearance: none;
  background: var(--md-sys-color-surface);
  border: 1px solid var(--md-sys-color-outline-variant);
  padding: 10px 40px 10px 16px;
  border-radius: 8px;
  color: var(--md-sys-color-on-surface);
  font-family: inherit; font-size: 0.95rem; cursor: pointer;
}
.select-wrapper::after {
  content: 'â–¼'; font-size: 0.7rem; position: absolute; right: 14px; top: 50%; transform: translateY(-50%); pointer-events: none;
}

/* --- RESUME TIMELINE (Organic) --- */
.resume-timeline {
  display: flex; flex-direction: column; gap: 0;
  border-left: 2px solid var(--md-sys-color-outline-variant);
  margin-left: 1rem; padding-left: 2rem;
}
.timeline-event {
  position: relative; padding-bottom: 3rem;
}
.timeline-event:last-child { padding-bottom: 0; }
.timeline-dot {
  position: absolute; left: calc(-2rem - 7px); top: 0;
  width: 12px; height: 12px; border-radius: 50%;
  background: var(--md-sys-color-primary);
  box-shadow: 0 0 0 4px var(--md-sys-color-surface-dim); /* Gap effect */
}
.timeline-date {
  font-size: 0.85rem; font-weight: 700; color: var(--md-sys-color-primary);
  margin-bottom: 0.5rem; text-transform: uppercase;
}
.timeline-card {
  background: var(--md-sys-color-surface-container);
  padding: 20px; border-radius: 16px;
}

/* --- CONTACT FORMS (Material Text Fields) --- */
.material-field {
  position: relative; margin-bottom: 1.5rem;
  background: var(--md-sys-color-surface-container);
  border-radius: 8px 8px 0 0;
  border-bottom: 2px solid var(--md-sys-color-outline);
}
.material-field:focus-within { border-bottom-color: var(--md-sys-color-primary); }

.material-field label {
  position: absolute; left: 16px; top: 18px;
  color: var(--md-sys-color-on-surface-variant);
  pointer-events: none; transition: 0.2s ease;
}
.material-field input, .material-field textarea {
  width: 100%; border: none; background: transparent;
  padding: 24px 16px 8px; font-size: 1rem; font-family: inherit;
  color: var(--md-sys-color-on-surface); outline: none;
}
/* Floating Label Logic */
.material-field input:focus + label,
.material-field input:not(:placeholder-shown) + label,
.material-field textarea:focus + label,
.material-field textarea:not(:placeholder-shown) + label {
  top: 6px; font-size: 0.75rem; color: var(--md-sys-color-primary);
}

/* --- ANIMATIONS --- */
@keyframes slideInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
@keyframes staggerFadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* Mobile Menu */
.nav-toggle { display: none; background: none; border: none; font-size: 1.5rem; color: var(--md-sys-color-on-surface); }
@media (max-width: 768px) {
  .nav-toggle { display: block; }
  .nav-list {
    display: none; position: absolute; top: 72px; left: 0; right: 0;
    background: var(--md-sys-color-surface); padding: 2rem;
    flex-direction: column; gap: 1rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  .nav-list.open { display: flex; animation: slideInUp 0.3s; }
  .filters-container { flex-direction: column; }
}